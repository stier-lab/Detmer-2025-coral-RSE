<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coral Restoration Model - Visual Summary</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .infographic {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 4px solid #667eea;
        }

        header h1 {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        header .subtitle {
            font-size: 1.3em;
            color: #7f8c8d;
            font-style: italic;
        }

        .section {
            margin-bottom: 50px;
        }

        .section-title {
            font-size: 1.8em;
            color: #667eea;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .system-flow {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-bottom: 30px;
            position: relative;
        }

        .flow-box {
            background: linear-gradient(135deg, var(--color-1) 0%, var(--color-2) 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            position: relative;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .flow-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.25);
        }

        .flow-box h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .flow-box .icon {
            font-size: 2em;
        }

        .flow-box .description {
            font-size: 0.95em;
            line-height: 1.6;
            opacity: 0.95;
        }

        .flow-box .key-params {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.3);
            font-size: 0.85em;
        }

        .external-box {
            --color-1: #2ecc71;
            --color-2: #27ae60;
        }

        .lab-box {
            --color-1: #3498db;
            --color-2: #2980b9;
        }

        .orchard-box {
            --color-1: #1abc9c;
            --color-2: #16a085;
        }

        .reef-box {
            --color-1: #e74c3c;
            --color-2: #c0392b;
            grid-column: 2 / 4;
        }

        .equation-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 40px 0;
        }

        .equation {
            font-size: 2em;
            font-weight: bold;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .equation-parts {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .equation-part {
            background: rgba(255,255,255,0.2);
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 0.9em;
        }

        .size-classes {
            display: flex;
            gap: 15px;
            justify-content: space-between;
            margin: 30px 0;
        }

        .size-class {
            flex: 1;
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: transform 0.3s;
        }

        .size-class:hover {
            transform: scale(1.05);
        }

        .size-class .class-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .size-class .icon {
            font-size: 2.5em;
            margin: 10px 0;
        }

        .size-class .range {
            font-size: 0.85em;
            opacity: 0.9;
        }

        .process-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .process-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid;
        }

        .process-card.growth { border-left-color: #2ecc71; }
        .process-card.shrinkage { border-left-color: #e67e22; }
        .process-card.stasis { border-left-color: #95a5a6; }
        .process-card.fragmentation { border-left-color: #9b59b6; }
        .process-card.reproduction { border-left-color: #3498db; }
        .process-card.mortality { border-left-color: #e74c3c; }

        .process-card h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .process-card p {
            color: #666;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .key-insights {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .key-insights h3 {
            color: #856404;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .key-insights ul {
            list-style-position: inside;
            color: #856404;
            line-height: 1.8;
        }

        .key-insights li {
            margin-bottom: 8px;
        }

        .parameter-highlight {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .param-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .param-box h4 {
            font-size: 1.2em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .param-box .value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
        }

        .param-box .description {
            font-size: 0.9em;
            opacity: 0.95;
            line-height: 1.5;
        }

        footer {
            margin-top: 50px;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
            text-align: center;
            color: #7f8c8d;
        }

        .print-only {
            display: none;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }

            .infographic {
                box-shadow: none;
                padding: 20px;
            }

            .print-only {
                display: block;
            }

            .flow-box, .size-class, .param-box {
                break-inside: avoid;
            }
        }

        .legend {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color {
            width: 40px;
            height: 25px;
            border-radius: 5px;
        }

        .arrows {
            text-align: center;
            font-size: 2em;
            color: #667eea;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="infographic">
        <header>
            <h1>ü™∏ Coral Restoration System Dynamics Model</h1>
            <p class="subtitle">A Visual Guide for Ecologists</p>
            <p style="margin-top: 10px; color: #95a5a6; font-size: 0.9em;">
                Acropora palmata ‚Ä¢ Lab Rearing ‚Ä¢ Nursery Cultivation ‚Ä¢ Field Restoration
            </p>
        </header>

        <!-- Section 1: System Overview -->
        <div class="section">
            <h2 class="section-title">üåä The Restoration System</h2>

            <div class="system-flow">
                <div class="flow-box external-box">
                    <h3><span class="icon">üåç</span> External Reefs</h3>
                    <p class="description">
                        Wild coral populations provide natural recruitment and larvae for lab collection.
                    </p>
                    <div class="key-params">
                        <strong>Key Parameters:</strong><br>
                        ‚Ä¢ Œª: Direct recruits/year<br>
                        ‚Ä¢ Œª_R: Larvae available<br>
                        ‚Ä¢ reef_yield: Collection efficiency
                    </div>
                </div>

                <div class="flow-box lab-box">
                    <h3><span class="icon">üî¨</span> Lab Facility</h3>
                    <p class="description">
                        Settlement on tiles (cement/ceramic) with two timing options: immediate outplant or 1-year retention.
                    </p>
                    <div class="key-params">
                        <strong>Key Parameters:</strong><br>
                        ‚Ä¢ lab_max: Capacity<br>
                        ‚Ä¢ s0/s1: Survival rates<br>
                        ‚Ä¢ m0/m1: Density dependence
                    </div>
                </div>

                <div class="flow-box orchard-box">
                    <h3><span class="icon">üå±</span> Orchard</h3>
                    <p class="description">
                        Protected nursery for growing corals and producing larvae. Creates positive feedback loop.
                    </p>
                    <div class="key-params">
                        <strong>Key Parameters:</strong><br>
                        ‚Ä¢ orchard_size: Capacity<br>
                        ‚Ä¢ orchard_yield: Larval collection<br>
                        ‚Ä¢ Higher survival & growth
                    </div>
                </div>

                <div class="flow-box reef-box">
                    <h3><span class="icon">ü™∏</span> Restoration Reef (Target Site)</h3>
                    <p class="description">
                        Natural field conditions with fragmentation, reproduction, and space constraints. Tracks corals by origin (provenance).
                    </p>
                    <div class="key-params">
                        <strong>Key Parameters:</strong><br>
                        ‚Ä¢ reef_areas: Carrying capacity (cm¬≤) ‚Ä¢ surv_pars: Field survival by size class ‚Ä¢ frag_pars: Fragmentation rates
                    </div>
                </div>
            </div>

            <div class="arrows">‚Üì ‚Üë Larvae & Coral Movement ‚Üì ‚Üë</div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);"></div>
                    <span><strong>External:</strong> Wild source</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);"></div>
                    <span><strong>Lab:</strong> Settlement & rearing</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #1abc9c 0%, #16a085 100%);"></div>
                    <span><strong>Orchard:</strong> Protected nursery</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);"></div>
                    <span><strong>Reef:</strong> Restoration target</span>
                </div>
            </div>
        </div>

        <!-- Section 2: Core Equation -->
        <div class="section">
            <h2 class="section-title">üßÆ Core Population Equation</h2>

            <div class="equation-banner">
                <div class="equation">N(t+1) = S ¬∑ (T + F) ¬∑ N(t) + R</div>

                <div class="equation-parts">
                    <div class="equation-part">
                        <strong>N(t)</strong><br>
                        Population at time t<br>
                        (by size class)
                    </div>
                    <div class="equation-part">
                        <strong>S</strong><br>
                        Survival<br>
                        (diagonal matrix)
                    </div>
                    <div class="equation-part">
                        <strong>T</strong><br>
                        Transition<br>
                        (growth + shrinkage + stasis)
                    </div>
                    <div class="equation-part">
                        <strong>F</strong><br>
                        Fragmentation<br>
                        (asexual reproduction)
                    </div>
                    <div class="equation-part">
                        <strong>R</strong><br>
                        Recruitment<br>
                        (new larvae settling)
                    </div>
                </div>

                <p style="margin-top: 20px; font-size: 1.1em;">
                    <strong>Leslie Matrix Model</strong> with asexual reproduction and provenance tracking
                </p>
            </div>
        </div>

        <!-- Section 3: Size Classes -->
        <div class="section">
            <h2 class="section-title">üìè Five Size Classes (by colony area)</h2>

            <div class="size-classes">
                <div class="size-class" style="background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);">
                    <div class="class-name">SC1</div>
                    <div class="icon">üî¨</div>
                    <div class="range">0‚Äì10 cm¬≤</div>
                    <div style="margin-top: 15px; font-size: 0.85em; line-height: 1.5;">
                        Recruits<br>
                        High mortality<br>
                        No reproduction
                    </div>
                </div>

                <div class="size-class" style="background: linear-gradient(135deg, #1abc9c 0%, #16a085 100%);">
                    <div class="class-name">SC2</div>
                    <div class="icon">üåø</div>
                    <div class="range">10‚Äì100 cm¬≤</div>
                    <div style="margin-top: 15px; font-size: 0.85em; line-height: 1.5;">
                        Small juveniles<br>
                        Moderate growth<br>
                        Minimal reproduction
                    </div>
                </div>

                <div class="size-class" style="background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);">
                    <div class="class-name">SC3</div>
                    <div class="icon">üå≥</div>
                    <div class="range">100‚Äì900 cm¬≤</div>
                    <div style="margin-top: 15px; font-size: 0.85em; line-height: 1.5;">
                        Large juveniles<br>
                        Faster growth<br>
                        Begins reproduction
                    </div>
                </div>

                <div class="size-class" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);">
                    <div class="class-name">SC4</div>
                    <div class="icon">üèõÔ∏è</div>
                    <div class="range">900‚Äì4k cm¬≤</div>
                    <div style="margin-top: 15px; font-size: 0.85em; line-height: 1.5;">
                        Subadults<br>
                        Fragmentation begins<br>
                        High fecundity
                    </div>
                </div>

                <div class="size-class" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);">
                    <div class="class-name">SC5</div>
                    <div class="icon">üëë</div>
                    <div class="range">&gt;4k cm¬≤</div>
                    <div style="margin-top: 15px; font-size: 0.85em; line-height: 1.5;">
                        Adults<br>
                        Max fecundity<br>
                        Max fragmentation
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 4: Demographic Processes -->
        <div class="section">
            <h2 class="section-title">‚öôÔ∏è Six Demographic Processes</h2>

            <div class="process-grid">
                <div class="process-card growth">
                    <h4>‚¨ÜÔ∏è Growth</h4>
                    <p>
                        Move to next larger size class (e.g., SC2 ‚Üí SC3). Cannot skip classes.
                        Faster in orchard (protected), slower on reef (natural stress).
                    </p>
                </div>

                <div class="process-card shrinkage">
                    <h4>‚¨áÔ∏è Shrinkage</h4>
                    <p>
                        Partial mortality from disease, predation, or competition. Can shrink to any smaller class.
                        More common on reef than in orchard.
                    </p>
                </div>

                <div class="process-card stasis">
                    <h4>‚è∏Ô∏è Stasis</h4>
                    <p>
                        Stay in same size class. Most common outcome. Probability = 1 - (growth + shrinkage).
                        Typical stasis: 70-80%.
                    </p>
                </div>

                <div class="process-card fragmentation">
                    <h4>üíî Fragmentation</h4>
                    <p>
                        Asexual reproduction via colony breakage. Only SC4 & SC5. Creates multiple new individuals
                        from one parent. Increases total population.
                    </p>
                </div>

                <div class="process-card reproduction">
                    <h4>üê£ Reproduction</h4>
                    <p>
                        Sexual reproduction via larvae. Only SC3+. Fecundity scales exponentially with size.
                        SC5 can produce 100,000+ larvae/year.
                    </p>
                </div>

                <div class="process-card mortality">
                    <h4>‚ò†Ô∏è Mortality</h4>
                    <p>
                        Size-specific survival rates. Smaller corals die more easily. SC1: 40-60% survival.
                        SC5: 80-90% survival. Higher in orchard than reef.
                    </p>
                </div>
            </div>
        </div>

        <!-- Section 5: Key Parameters -->
        <div class="section">
            <h2 class="section-title">üéõÔ∏è Most Important Parameters</h2>

            <div class="parameter-highlight">
                <div class="param-box">
                    <h4>üß¨ Survival (surv_pars)</h4>
                    <div class="value">0.4 ‚Äì 0.9</div>
                    <p class="description">
                        Fraction surviving each year, by size class. <strong>Most influential parameter.</strong>
                        Small changes (0.7 ‚Üí 0.75) can shift from population decline to growth.
                    </p>
                </div>

                <div class="param-box">
                    <h4>üî¨ Lab Capacity (lab_max)</h4>
                    <div class="value">10k ‚Äì 40k</div>
                    <p class="description">
                        Maximum larvae processed per year. <strong>Common bottleneck.</strong>
                        If orchard produces 100k larvae but lab_max = 20k, you lose 80k potential settlers.
                    </p>
                </div>

                <div class="param-box">
                    <h4>üå± Orchard Yield (orchard_yield)</h4>
                    <div class="value">0.0 ‚Äì 1.0</div>
                    <p class="description">
                        Fraction of orchard larvae collected. <strong>Determines feedback loop strength.</strong>
                        Higher yield = more sustainable restoration (less dependence on wild spawning).
                    </p>
                </div>

                <div class="param-box">
                    <h4>ü™∏ Reef Allocation (reef_prop)</h4>
                    <div class="value">0.0 ‚Äì 1.0</div>
                    <p class="description">
                        Fraction of outplants to reef vs. orchard. <strong>Trade-off:</strong> Immediate reef restoration
                        vs. building orchard for long-term larval production.
                    </p>
                </div>
            </div>
        </div>

        <!-- Section 6: Key Insights -->
        <div class="section">
            <h2 class="section-title">üí° Key Insights for Managers</h2>

            <div class="key-insights">
                <h3>üéØ What This Model Tells You:</h3>
                <ul>
                    <li><strong>Provenance matters:</strong> Track which restoration pathway (tile type, timing, destination) produces the most successful corals</li>
                    <li><strong>Lab capacity is often the bottleneck:</strong> Orchard can produce far more larvae than lab can process</li>
                    <li><strong>Orchard creates positive feedback:</strong> Initial investment pays off exponentially as orchard corals mature and produce larvae</li>
                    <li><strong>Size class transitions are critical:</strong> Getting corals from SC1 to SC3 (reproductive size) is the key challenge</li>
                    <li><strong>Fragmentation can double growth rates:</strong> In high-energy environments, asexual reproduction significantly boosts populations</li>
                    <li><strong>Trade-offs exist:</strong> Immediate reef restoration vs. building orchard "seed bank" for long-term sustainability</li>
                    <li><strong>Population growth rate (Œª):</strong> Eigenvalue of projection matrix tells you if restoration is working (Œª > 1 = growing)</li>
                </ul>
            </div>
        </div>

        <footer>
            <p><strong>Model:</strong> Stage-Structured Population Dynamics for Acropora palmata Restoration</p>
            <p style="margin-top: 10px;">
                <strong>Developers:</strong> Raine Detmer & Adrian Stier<br>
                <strong>Documentation:</strong> January 2026
            </p>
            <p style="margin-top: 15px; font-size: 0.9em;">
                For interactive exploration, open <code>interactive_model_guide.html</code><br>
                For technical details, see <code>MODEL_ARCHITECTURE_SPECIFICATION.md</code>
            </p>
            <p style="margin-top: 15px; font-size: 0.85em; color: #95a5a6;">
                Print this page (Cmd+P / Ctrl+P) for a quick reference handout
            </p>
        </footer>

        <div class="print-only" style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
            <p style="text-align: center; color: #7f8c8d;">
                <strong>QR Code:</strong> Scan to access interactive version<br>
                [QR code would go here]
            </p>
        </div>
    </div>
</body>
</html>
